{# Espera: grupos (lista de dicts com keys: periodo=(ini,fim), servidores=[Servidor,...]) #}
<div class="card shadow-sm mt-4">
  <div class="card-header bg-light">
    <strong><i class="bi bi-table"></i> Escala do plantão</strong>
  </div>
  <div class="card-body">
    <table class="table table-sm table-striped align-middle">
      <thead class="table-light">
        <tr>
          <th>Início</th>
          <th>Fim</th>
          <th>Servidores</th>
          <th>Telefones</th>
        </tr>
      </thead>
      <tbody>
        {% for g in grupos %}
        <tr id="escala-row-{{ g.index }}">
          <td>{{ g.periodo.0|date:"d/m/Y" }}</td>
          <td>{{ g.periodo.1|date:"d/m/Y" }}</td>

          <td id="escala-nome-{{ g.index }}">
            {% if g.servidores %}
              <ul class="list-unstyled mb-0">
                {% for s in g.servidores %}<li>{{ s.nome }}</li>{% endfor %}
              </ul>
            {% else %}
              <span class="text-muted">—</span>
            {% endif %}
          </td>

          <td id="escala-fone-{{ g.index }}">
            {% if g.servidores %}
              <ul class="list-unstyled mb-0">
                {% for s in g.servidores %}
                  <li>{{ s.telefone|default:s.celular|default:"—" }}</li>
                {% endfor %}
              </ul>
            {% else %}
              <span class="text-muted">—</span>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>

    <p class="text-muted small mb-0">
      A tabela reflete a ordem dos grupos. Reordene ↑/↓ nos cards dos grupos para alterar.
    </p>
  </div>
</div>
