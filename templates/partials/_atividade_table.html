{# templates/partials/_atividade_table.html #}
<div class="table-responsive">
  <table class="table table-hover align-middle mb-0">
    <thead class="table-light">
      <tr>
        <th><i class="bi bi-clipboard-check me-1"></i> Tarefa</th>
        <th><i class="bi bi-person-check me-1"></i> Responsável</th>
        <th><i class="bi bi-calendar-event me-1"></i> Prazo</th>
        <th class="text-center"><i class="bi bi-activity me-1"></i> Status</th>
        <th class="text-end"><i class="bi bi-tools me-1"></i> Ações</th>
      </tr>
    </thead>
    <tbody>
      {% if page_obj %}
        {% for a in page_obj.object_list %}
          <tr>
            <td class="fw-medium">
              {% if a.titulo %}{{ a.titulo }}{% else %}{{ a }}{% endif %}
            </td>
            <td>{% firstof a.responsavel a.servidor "—" %}</td>
            <td>
              {% if a.prazo %}{{ a.prazo|date:"d/m/Y" }}
              {% elif a.data_limite %}{{ a.data_limite|date:"d/m/Y" }}
              {% elif a.data %}{{ a.data|date:"d/m/Y" }}
              {% else %}—{% endif %}
            </td>
            <td class="text-center">
              {% if a.concluida or a.finalizada %}
                <span class="badge bg-success">Concluída</span>
              {% else %}
                <span class="badge bg-secondary">{% firstof a.get_status_display a.status "Pendente" %}</span>
              {% endif %}
            </td>
            <td class="text-end">
              {% url 'atividades:editar' a.id as edit_base %}
              {% url 'atividades:excluir' a.id as delete_base %}
              {% include "partials/_botoes_acoes.html" %}
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="5" class="text-center text-muted py-4">Nenhuma atividade encontrada.</td></tr>
        {% endfor %}
      {% else %}
        {% for a in atividades %}
          <tr>
            <td class="fw-medium">
              {% if a.titulo %}{{ a.titulo }}{% else %}{{ a }}{% endif %}
            </td>
            <td>{% firstof a.responsavel a.servidor "—" %}</td>
            <td>
              {% if a.prazo %}{{ a.prazo|date:"d/m/Y" }}
              {% elif a.data_limite %}{{ a.data_limite|date:"d/m/Y" }}
              {% elif a.data %}{{ a.data|date:"d/m/Y" }}
              {% else %}—{% endif %}
            </td>
            <td class="text-center">
              {% if a.concluida or a.finalizada %}
                <span class="badge bg-success">Concluída</span>
              {% else %}
                <span class="badge bg-secondary">{% firstof a.get_status_display a.status "Pendente" %}</span>
              {% endif %}
            </td>
            <td class="text-end">
              {% url 'atividades:editar' a.id as edit_base %}
              {% url 'atividades:excluir' a.id as delete_base %}
              {% include "partials/_botoes_acoes.html" %}
            </td>
          </tr>
        {% empty %}
          <tr><td colspan="5" class="text-center text-muted py-4">Nenhuma atividade encontrada.</td></tr>
        {% endfor %}
      {% endif %}
    </tbody>
  </table>
</div>
