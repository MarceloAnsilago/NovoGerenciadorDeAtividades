{% extends "core/base.html" %}
{% load static %}

{% block extra_head %}
  <!-- FullCalendar + Bootstrap 5 CSS -->
  <link href="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

  <style>
    #calendar {
      max-width: 1100px;
      margin: 24px auto;
      min-height: 520px;
      background: #fff;
      padding: 8px;
    }
  </style>
{% endblock %}

{% block content %}
  <div class="container my-4">
    <h1>Programar Atividades</h1>
    <div id="calendar" class="mt-4"></div>
  </div>

  <!-- Offcanvas de Nova Atividade -->
  <div class="offcanvas offcanvas-start" tabindex="-1" id="offcanvasAtividade" aria-labelledby="offcanvasAtividadeLabel">
    <div class="offcanvas-header">
      <h5 class="offcanvas-title" id="offcanvasAtividadeLabel">Nova Atividade</h5>
      <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas" aria-label="Fechar"></button>
    </div>
    <div class="offcanvas-body">
      <form id="formAtividade">
        <div class="mb-3">
          <label for="dataAtividade" class="form-label">Data</label>
          <input type="text" class="form-control" id="dataAtividade" name="data" readonly>
        </div>
        <div class="mb-3">
          <label for="descricaoAtividade" class="form-label">Descrição</label>
          <input type="text" class="form-control" id="descricaoAtividade" name="descricao" required>
        </div>
        <div class="d-flex justify-content-between">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="offcanvas">Cancelar</button>
          <button type="submit" class="btn btn-primary">Salvar</button>
        </div>
      </form>
    </div>
  </div>
{% endblock %}

{% block extra_js %}
  <!-- Bootstrap + FullCalendar JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/index.global.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@6.1.8/locales-all.global.min.js"></script>

  <!-- URL de feed de eventos -->
  <script>
    window.calendarFeedURL = "{% url 'programar_atividades:events_feed' %}";
  </script>

  <!-- Seu script principal -->
  <script src="{% static 'js/calendar.js' %}"></script>
{% endblock %}
